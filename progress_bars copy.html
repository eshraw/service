<!DOCTYPE html>
<html lang="en">
<head>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');

  .card1 {
    background-color: white;
    border-radius: 16px;
    padding: 24px;
    box-shadow: inset 0 0 0 1px #E5E2D8;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Figtree', sans-serif;
    width: 125%;
    scale: 0.85;
  }

  .progress-container1 {
    width: 100%;
    position: relative;
    margin: 20px 0;
    display: flex;
    flex-direction: column;
    gap: 10px; /* Increased from 10px */
  }

  .progress-bar1 {
    height: 20px;
    border-radius: 4px;
    transition: width 0.3s ease-in-out;
    box-shadow: 0px 0px 2px 0px rgba(103, 110, 144, 0.10), 0px 1px 2px 0px rgba(103, 110, 144, 0.05), 0px 2px 4px 0px rgba(103, 110, 144, 0.08), 0px 6px 8px 0px rgba(103, 110, 144, 0.05), 0px 16px 16px 0px rgba(103, 110, 144, 0.04);
    position: relative;
    background-color: transparent;
    width: 100% !important;
    margin-bottom: 16px; /* Added margin below progress bar */
  }

  .progress-bar1::before {
    content: '';
    position: absolute;
    border-radius: 4px;
    top: 0;
    left: 0;
    height: 100%;
    transition: width 0.3s ease-in-out, background-color 0.3s ease-in-out;
    width: var(--width, 0%);
    background-color: var(--color, #ddd);
  }

  .divider1 {
    display: flex;
    height: 1px;
    justify-content: center;
    align-items: center;
    align-self: stretch;
    background-color: #E5E2D8;
    margin: 16px 0; /* Added margin around divider */
  }

  .bar-title1 {
    font-size: 14px;
    color: #333;
    margin-bottom: -16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: var(--Font-Family-Title, Figtree);
    font-size: var(--Font-Size-L, 20px);
    font-style: normal;
    font-weight: 700;
    line-height: 130%;
  }

  .percentage-card1 {
    display: flex;
    border-radius: 12px;
    padding: 8px 16px;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: color-mix(in srgb, var(--color, #666) 20%, white);
    font-size: 12px;
    color: var(--color, #666);
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    transition: color 0.3s ease-in-out;
    font-family: var(--Font-Family-Title, Figtree);
    font-style: normal;
    font-weight: 700;
    line-height: 130%;
  }

  .percentage-card1 .label1 {
    font-size: var(--Font-Size-XS, 12px);
    font-weight: 400;
    margin-bottom: 4px;
    text-align: right;
  }

  .percentage-card1 .score1 {
    font-size: var(--Font-Size-L, 20px);
    text-align: right;
  }

  .progress-subtext1 {
    text-align: left;
    font-size: 14px;
    color: #666;
    margin-bottom: 14px;
    font-family: var(--Font-Family-Body, Roboto);
    font-size: var(--Font-Size-XS, 12px);
    font-style: normal;
    font-weight: 400;
    line-height: 130%;
  }
  div {
    text-align: left;
    align-items: left;
  }
</style>
</head>
<body>
<div class="card1">
  <div class="progress-container1">
    <div class="bar-title1">
      Grandir ensemble
      <span class="percentage-card1">
        <span class="label1">Score</span>
        <span class="score1">3.0/5</span>
      </span>
    </div>
    <div class="progress-subtext1">Note moyenne du marché : 2.7</div>
    <div class="progress-bar1 progress-bar1-1"></div>
    <div class="divider1"></div>
    <div class="bar-title1">
      Rémunération attractive
      <span class="percentage-card1">
        <span class="label1">Score</span>
        <span class="score1">4.0/5</span>
      </span>
    </div>
    <div class="progress-subtext1">Note moyenne du marché : 3.2</div>
    <div class="progress-bar1 progress-bar1-2"></div>
    <div class="divider1"></div>
    <div class="bar-title1">
      Répondre aux exigences légales
      <span class="percentage-card1">
        <span class="label1">Score</span>
        <span class="score1">3.5/5</span>
      </span>
    </div>
    <div class="progress-subtext1">Note moyenne du marché : 2.4</div>
    <div class="progress-bar1 progress-bar1-3"></div>
    <div class="divider1"></div>
    <div class="bar-title1">
      Elaborer vos stratégies RH
      <span class="percentage-card1">
        <span class="label1">Score</span>
        <span class="score1">4.5/5</span>
      </span>
    </div>
    <div class="progress-subtext1">Note moyenne du marché : 2.9</div>
    <div class="progress-bar1 progress-bar1-4"></div>
  </div>
</div>

<script>
  // Get progress values from URL parameters
  const urlParams2 = new URLSearchParams(window.location.search);

  // Function to get color based on value
  function getProgressColor(value) {
    if (value < 2.0) return '#C75741'; // Red
    if (value < 3.9) return '#E6B83F'; // Orange
    return '#79BF9D'; // Green
  }

  // Function to update progress bar width and text
  function updateProgress2(barNumber, value) {
    // Update the progress bar width and color
    const progressBar = document.querySelector(`.progress-bar1-${barNumber}`);
    const color = getProgressColor(value);
    if (progressBar) {
        progressBar.style.setProperty('--width', `${(value / 5) * 100}%`);
        progressBar.style.setProperty('--color', color);
    }

    // Update the percentage card text and color
    const percentageCard = document.querySelector(`.progress-bar1-${barNumber}`).previousElementSibling.previousElementSibling.querySelector('.percentage-card1');
    if (percentageCard) {
        percentageCard.querySelector('.score1').textContent = `${value.toFixed(1)}/5`;
        percentageCard.style.setProperty('--color', color);
    }
  }
  
  // Initialize progress bars
  window.addEventListener('DOMContentLoaded', () => {
    // Set values for all bars from URL parameters or use defaults
    const progress5 = urlParams2.get('scoreP5') ? parseFloat(urlParams2.get('scoreP5')) : 3.0;
    const progress6 = urlParams2.get('scoreP6') ? parseFloat(urlParams2.get('scoreP6')) : 4.0;
    const progress7 = urlParams2.get('scoreP7') ? parseFloat(urlParams2.get('scoreP7')) : 3.5;
    const progress8 = urlParams2.get('scoreP8') ? parseFloat(urlParams2.get('scoreP8')) : 4.5;
    
    // Update all progress bars
    updateProgress2(1, Math.min(Math.max(progress5, 0), 5));
    updateProgress2(2, Math.min(Math.max(progress6, 0), 5));
    updateProgress2(3, Math.min(Math.max(progress7, 0), 5));
    updateProgress2(4, Math.min(Math.max(progress8, 0), 5));
  });
</script>
</body>
</html>